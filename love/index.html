<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0" >
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<div class="panel">
        <div id="dialog">
        	<div class="self-block">
				<p class="common-word">小黄鸭，我是你的饲养员小黄鸭，我是你的饲养员小黄鸭，我是你的饲养员</p>
				<img src="self.jpg">
			</div>
			<div class="love-block">
			    <img src="love.jpg">
				<p class="common-word">小黄鸭，我是你的饲养员小黄鸭，我是你的饲养员小黄鸭，我是你的饲养员</p>
			</div>
        </div>
		<div id="spanel"></div>
		<div class="input">
			点击你想要给我说的悄悄话
		</div>
	</div>
	<script type="text/javascript">
		var data = [
		    [{key: 0,content: '你到底是谁？'},{key: 1,content: '啥都不想说，就爱你'}]
		    ],
		    myword = [
                ['我是你的宝宝啊', '我就知道你要说这个']
		    ],
		    dialog = document.getElementById('dialog'),
		    spanel = document.getElementById('spanel'),
		    answer= {},
		    index = 0;
    
        function update (index) {
        	switch (index) {
        		case 0:
              spanel.innerHTML = render(0)
        	}
        }

        function chose() {
        	var key = this.dataset.key;
        	answer[index] = key;
        	var text = this.innerHTML;
        	addDialog('love', text);
        	setTimeout(function () {
        		addDialog('self', getMyword(index))
        		index++;
        	}, 2000);
        	
        }

        function addDialog(obj,text) {
        	if (obj === 'love') {
        		var div = "<div class='love-block'><img src='love.jpg'><p class='common-word'>" + text + "</p></div>";
        		dialog.innerHTML = dialog.innerHTML + div;
        	} else {
                var div = "<div class='self-block'><p class='common-word'>" + text + "</p><img src='self.jpg'></div>";
                dialog.innerHTML = dialog.innerHTML + div;
        	}
        }

        function getMyword (index) {
        	return myword[index][answer[index]]
        }

        function render (index) {
        	var ul = '';
        	for (var i = 0; i < data[index].length; i++) {
        		ul += "<li onclick='chose.bind(this)()' class='said' data-key=" + data[index][i].key + ">" + data[index][i].content + "</li>";  	
        	}
        	return ul;
        }

        update(0)
	</script>
</body>
</html>